# ğŸš€ ì•ˆì „ ê·€ê°€ SMS ì•Œë¦¬ë¯¸ ì•± ë°±ì—”ë“œ

ì§€ë¦¬ ë°ì´í„° ê¸°ë°˜ ì•ˆì „ ê·€ê°€ ì•Œë¦¬ë¯¸ ì„œë¹„ìŠ¤ì˜ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë¡œ, Spring Boot 3ë¥¼ í™œìš©í•œ í™•ì¥ ê°€ëŠ¥í•œ REST APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ“‹ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **ì–¸ì–´**: Java 21
- **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.2.4
- **ë³´ì•ˆ**: Spring Security, JWT (jjwt 0.12.3)
- **ORM**: Spring Data JPA, Hibernate, QueryDSL 5.0.0
- **ê³µê°„ ë°ì´í„° ì²˜ë¦¬**: Hibernate Spatial 6.5.0, PostGIS JDBC 2.5.0
- **API ë¬¸ì„œí™”**: [SpringDoc OpenAPI (Swagger UI 3) 2.4.0](https://smart-safe-return-backend-88013499747.asia-northeast2.run.app/swagger-ui/index.html)
- **ìœ íš¨ì„± ê²€ì‚¬**: Spring Validation
- **ì»¨í…Œì´ë„ˆ**: Dockerfile

### ë°ì´í„°ë² ì´ìŠ¤
- **ê°œë°œ í™˜ê²½**: PostgreSQL + PostGIS
- **ìš´ì˜ í™˜ê²½**: PostgreSQL + PostGIS (ê³µê°„ ë°ì´í„° í™•ì¥)
- **êµ¬ì¡°**: [ERD CLOUD](https://www.erdcloud.com/d/qB5R3umPgfB8fMYXq)

### í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤
- **ë°°í¬ í™˜ê²½**: Google Cloud Run
- **ë°ì´í„°ë² ì´ìŠ¤**: Google Cloud SQL (PostgreSQL)
- **íŒŒì¼ ì €ì¥ì†Œ**: Google Cloud Storage
- **ê³ ì • ì™¸ë¶€ IP ì£¼ì†Œ êµ¬ì„±**: CoolSms ë“±ë¡ ipë¥¼ ê³ ì •
- **ë³´ì•ˆ**: í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜ ì‹œí¬ë¦¿ ê´€ë¦¬

### ì™¸ë¶€ API ë° ì„œë¹„ìŠ¤
- **SMS ì„œë¹„ìŠ¤**: CoolSMS API ì—°ë™ (Nurigo SDK 4.3.2)

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

- **ì‚¬ìš©ì ê´€ë¦¬**: íšŒì›ê°€ì…, ë¡œê·¸ì¸, í”„ë¡œí•„ ê´€ë¦¬
- **JWT ê¸°ë°˜ ì¸ì¦**: ì•¡ì„¸ìŠ¤ í† í° ë° ë¦¬í”„ë ˆì‹œ í† í° í™œìš©í•œ ë³´ì•ˆ ì‹œìŠ¤í…œ + RTR ê¸°ë²• ì ìš©
- **ì§€ë¦¬ì  ìœ„ì¹˜ ê¸°ë°˜ ì„œë¹„ìŠ¤**: PostGISë¥¼ í™œìš©í•œ ì§€ë¦¬ ë°ì´í„° ì²˜ë¦¬ ë° ë¶„ì„
- **íŒŒì¼ ì—…ë¡œë“œ**: Google Cloud Storageë¥¼ í™œìš©í•œ ì´ë¯¸ì§€ ë° íŒŒì¼ ì €ì¥ (í”„ë¡œí•„ ê¸°ëŠ¥)
- **SMS ì¸ì¦**: CoolSMSë¥¼ í†µí•œ íœ´ëŒ€í° ë²ˆí˜¸ ì¸ì¦ ì‹œìŠ¤í…œ
- **RESTful API**: í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ íš¨ìœ¨ì ì¸ í†µì‹ ì„ ìœ„í•œ API ì„¤ê³„
- **ë¬¸ì„œí™”ëœ API**: Swagger UIë¥¼ í†µí•œ API ë¬¸ì„œ ì œê³µ

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/dodo/smartsafereturn/
â”‚   â”‚   â”œâ”€â”€ admin/          # ê´€ë¦¬ì ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ answer/         # ë‹µë³€ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ auth/           # ì¸ì¦ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/ # ì¸ì¦ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/        # ì¸ì¦ ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/     # ì¸ì¦ ê´€ë ¨ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/ # ì¸ì¦ ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”‚   â”œâ”€â”€ service/    # ì¸ì¦ ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ utils/      # ì¸ì¦ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ emergencycontact/ # ë¹„ìƒ ì—°ë½ì²˜ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ global/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ config/      # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/      # ê³µí†µ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ handler/     # ê³µí†µ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”‚   â””â”€â”€ service/     # ê³µí†µ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ member/         # íšŒì› ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ messagelog/     # ë©”ì‹œì§€ ë¡œê·¸ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ question/       # ì§ˆë¬¸ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/ # ì§ˆë¬¸ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/        # ì§ˆë¬¸ ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/     # ì§ˆë¬¸ ê´€ë ¨ ì—”í‹°í‹°
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/ # ì§ˆë¬¸ ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ service/    # ì§ˆë¬¸ ê´€ë ¨ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ questioncategory/ # ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ saferoute/      # ì•ˆì „ ê²½ë¡œ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ sms/            # SMS ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ sosmessage/     # SOS ë©”ì‹œì§€ ê¸°ëŠ¥
â”‚   â”‚   â””â”€â”€ verification/   # ì¸ì¦ ê²€ì¦ ê¸°ëŠ¥
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml # ê¸°ë³¸ ì„¤ì •
â”‚       â”œâ”€â”€ application-dev.yml # ê°œë°œ í™˜ê²½ ì„¤ì •
â”‚       â””â”€â”€ application-prod.yml # ìš´ì˜ í™˜ê²½ ì„¤ì •
â””â”€â”€ test/                   # í…ŒìŠ¤íŠ¸ ì½”ë“œ
    â””â”€â”€ java/com/dodo/smartsafereturn/ # í…ŒìŠ¤íŠ¸ ì½”ë“œ 
```

## ğŸš€ ë°°í¬

ì´ í”„ë¡œì íŠ¸ëŠ” Google Cloud Runì— ë°°í¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```bash
# Google Cloud CLIë¡œ ë°°í¬
gcloud run deploy smart-safe-return-backend \
  --source . \
  --region asia-northeast2 \
  --platform managed \
  --allow-unauthenticated
```

## ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- ëª¨ë“  ë¹„ë°€ ì •ë³´ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
- Google Cloud í™˜ê²½ì—ì„œëŠ” Secret Managerë¥¼ í™œìš©í•˜ì—¬ ë¯¼ê°í•œ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
- JWT ë¥¼ í†µí•œ ì¸ì¦ / ì¸ê°€ ê¸°ëŠ¥ -> Refresh í† í° ë° RTR ê¸°ë²• ë„ì…ìœ¼ë¡œ ì‹ ë¢°ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.

## ğŸ“š API ë¬¸ì„œ

Swagger UIë¥¼ í†µí•´ API ë¬¸ì„œê°€ ì œê³µë©ë‹ˆë‹¤.

- ìš´ì˜ í™˜ê²½: `https://smart-safe-return-backend-88013499747.asia-northeast2.run.app/swagger-ui/index.html`

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”
- QueryDSLì„ í™œìš©í•œ íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ ê´€ë¦¬
  - CustomAnswerRepositoryImpl , CustomQuestionRepositoryImpl
    : ì¡°ê±´ë³„ ê²€ìƒ‰, í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ count ì¿¼ë¦¬, Dto ì§ì ‘ ì¡°íšŒë¥¼ í†µí•œ N+1 ë¬¸ì œ ë°©ì§€ (fetchJoinì„ í™œìš©í•˜ì§€ ì•Šê³  ìµœì í™” ê°€ëŠ¥)

## ğŸ’¡ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
- CoolSms ë°°í¬ í™˜ê²½ ì¸ì¦
  - ê³ ì • ì•„ì´í”¼ í™˜ê²½ì´ ì•„ë‹Œ í´ë¼ìš°ë“œ ëŸ°ì—ì„œì˜ Ip ì¸ì¦ ë“±ë¡ ë¬¸ì œ ë°œìƒ
  - VPC ì„¤ì •ê³¼ ì„œë¸Œë„· ì„¤ì •, ì„œë²„ë¦¬ìŠ¤ ì»¤ë„¥ì…˜ ì„¤ì •ì„ í†µí•´ ì™¸ë¶€ ê³ ì • IP ì„¤ì • -> ë“±ë¡

## ğŸ“ ì—°ë½ì²˜

- ê°œë°œì: [ì´ê·œì°¬](mailto:hoo788@gmail.com)
- ì›¹ì‚¬ì´íŠ¸: [í¬íŠ¸í´ë¦¬ì˜¤ ë§í¬](https://github.com/smart-safe-return/spring_backend)
- GitHub: [GitHub í”„ë¡œí•„](https://github.com/gyuchanlee)
